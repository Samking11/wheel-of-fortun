<!DOCTYPE html>
<html>
  <head>
    <title>Wheel of fortune</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    
     <div class="imgside">
   
      <div class="item">
        <img src="/chupapa.png" alt="">
        <p>Rana</p>
      </div>
      <div class="item">
        <img src="/bug.png" alt="">
        <p>Caracol</p>
      </div>
      <div class="item">
        <img src="/chupapa.png" alt="">
        <p>Delfín</p>
      </div>
      <div class="item">
        <img src="/hindu.png" alt="">
        <p>Mariquita</p>
      </div>
      <div class="item">
        <img src="/penguin.png" alt="">
        <p>Koala</p>
      </div>
      <div class="item">
        <img src="/unicorn.png" alt="">
        <p>Unicornio</p>
      </div>
      <div class="item">
        <img src="/unicorn.png" alt="">
        <p>Dragón</p>
      </div>
      <div class="item">
        <img src="/hindu.png" alt="">
        <p>Snow-Man</p>
      </div>
    </div>
    
    
      <div id="app">
        <img class="marker" src="marker.png" />
        <img class="wheel" src="wheel.png" />
        <img class="button" src="button.png" />
        <div class="display">-</div>
        <div class="score">Score: <span id="score">0</span></div>
      
   
  </td>
  </tr>
  </table>
    <script src="script.js"></script>
    <script>
      (function () {
        const wheel = document.querySelector(".wheel");
        const startButton = document.querySelector(".button");
        const display = document.querySelector(".display");
        const scoreDisplay = document.getElementById("score");

        let deg = 0;
        let zoneSize = 45; // deg
        let score = 0;
        let spinCount = 0;

        // Counter clockwise
        const symbolSegments = {
          1: "Rana",
          2: "Caracol",
          3: "Delfín",
          4: "Mariquita",
          5: "Koala",
          6: "Unicornio",
          7: "Dragón",
          8: "Snow-Man",
        };

        const handleWin = (actualDeg, guess) => {
          const winningSymbolNr = Math.ceil(actualDeg / zoneSize);
          const winningSymbol = symbolSegments[winningSymbolNr];

          if (guess && guess.toLowerCase() === winningSymbol.toLowerCase()) {
            score++;
            display.innerHTML = "Correct!";
          } else {
            score = Math.max(0, score - 1); // Decrement score by 1, but ensure it never goes below 0
            display.innerHTML = "Incorrect!";
          }

          scoreDisplay.textContent = score;
          spinCount++;

          if (spinCount === 10) {
            display.innerHTML = "Game Over! Your final score is: " + score;
            startButton.style.display = "none";
          }
        };

        startButton.addEventListener("click", () => {
          const guess = prompt("Guess the symbol:");
          if (guess) {
            // Reset display
            display.innerHTML = "-";
            // Disable button during spin
            startButton.style.pointerEvents = "none";
            // Calculate a new rotation between 5000 and 10 000
            deg = Math.floor(5000 + Math.random() * 5000);
            // Set the transition on the wheel
            wheel.style.transition = "all 10s ease-out";
            // Rotate the wheel
            wheel.style.transform = `rotate(${deg}deg)`;
            // Apply the blur
            wheel.classList.add("blur");

            wheel.addEventListener("transitionend", () => {
              // Remove blur
              wheel.classList.remove("blur");
              // Enable button when spin is over
              startButton.style.pointerEvents = "auto";
              // Need to set transition to none as we want to rotate instantly
              wheel.style.transition = "none";
              // Calculate degree on a 360 degree basis to get the "natural" real rotation
              // Important because we want to start the next spin from that one
              // Use modulus to get the rest value
              const actualDeg = deg % 360;
              // Set the real rotation instantly without animation
              wheel.style.transform = `rotate(${actualDeg}deg)`;
              // Calculate and display the winning symbol
              handleWin(actualDeg, guess);
            });
          }
        });
      })();
    </script>
    </div>
  </body>
</html>
